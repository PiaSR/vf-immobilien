---
// PropertyCard.astro
import { Image } from "astro:assets";

// Define the properties this card expects
interface Property {
  slug: string;
  imageUrl: string;
  title: string;
  location: string;
  area: number;
  rooms: number;
  price: number;
  marketingType: "miete" | "kauf";
}

const { property } = Astro.props as { property: Property };

// Helper to format currency
const formatPrice = (price: number) => {
  return new Intl.NumberFormat("de-DE", {
    style: "currency",
    currency: "EUR",
    maximumFractionDigits: 0,
  })
    .format(price)
    .replace("€", "")
    .trim(); // Remove the € sign since we add it separately
};

const priceSuffix = property.marketingType === "miete" ? "/Monat" : "";
---

<a href={`/property/${property.slug}`} class="property-card-link">
  <div class="property-card-wrapper">
    <div class="property-card-image-box">
      <img
        src="${property.imageUrl}"
        loading="lazy"
        alt="${property.title}"
        class="property-card-image"
      />
    </div>
    <div class="property-card-info-wrapper">
      <div class="property-card-location-wrapper">
        <div class="location-icon-wrapper">${LOCATION_SVG}</div>
        <div class="property-card-address">${property.location}</div>
      </div>

      <h3 class="heading-style-h5 property-card-heading">
        ${property.title}
      </h3>

      <div class="property-card-icons-wrapper">
        <div class="property-card-icon-text">
          <div class="detail-icon-wrapper">${SQM_SVG}</div>
          <div class="text-style-extra-tiny">${property.area} qm</div>
        </div>

        <div class="property-card-icon-text">
          <div class="detail-icon-wrapper">${ROOM_SVG}</div>
          <div class="text-style-extra-tiny">${property.rooms} Zimmer</div>
        </div>
      </div>

      <div class="spacer spacer-small"></div>
      <div class="property-icon-price-wrapper">
        <div class="price-value">€ ${formatPrice}</div>
        <div class="price-suffix">${priceSuffix}</div>
      </div>
    </div>
  </div>
</a>
